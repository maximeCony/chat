define(["jquery","underscore","backbone","views/message/FormView","collections/MessageCollection","collections/RoomCollection","views/message/ListView","views/room/ListView","views/user/FormView","views/room/FormView"],function(e,t,n,r,i,s,o,u,a,f){var l=n.Router.extend({routes:{"":"user",room:"room","room/:_id/chat":"chat"},initialize:function(){this.appContainer=e("#app")},start:function(){n.history.start()},room:function(){rooms=new s;var t=new f;this.appContainer.empty().append("<h2>Create a new room</h2>",t.render().el,"<h2>Or join an existing one</h2>",'<section id="rooms"></section>');var n=new u({collection:rooms,el:e("#rooms")});n.render(),rooms.fetch()},user:function(){var e=new a;this.appContainer.empty().append("<h2>What's your name?</h2>",e.render().el)},chat:function(t){window.socket.emit("room:join",{_id:t});var n=new i,s=new r;this.appContainer.empty().append("<section id='messages'></section>",s.render().el);var u=(new o({collection:n,el:e("#messages")})).resize();u.render(),n.fetch()}}),c=function(){appRouter=new l,appRouter.start()};return{initialize:c}});